<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Nova Asia Bestellen</title>
<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    padding: 20px;
    max-width: 800px;
    margin: auto;
    background: #f5f5f7;
    color: #1c1c1e;
    padding-top: 60px;
  }

  :root {
  --apple-blue: #007aff;
}

html, body {
  margin: 0;
  padding: 0;
}

.navbar {
    display: flex;
    overflow-x: auto;
    white-space: nowrap;
    scroll-behavior: smooth;
    background: #fff;
    border-bottom: 1px solid #ccc;
}
.navbar::-webkit-scrollbar {
    display: none;
}
.navbar a {
    flex: 0 0 auto;
    padding: 6px 12px;
    margin: 0 4px;
    color: #007bff;
    text-decoration: none;
}
.navbar a.active {
    color: #fff;
    background: #007bff;
}
section {
    padding: 80px 16px;
    min-height: 100vh;
}




  h1, h2 {
    text-align: center;
    margin-bottom: 20px;
    font-weight: 600;
    color: #111;
  }

  .menu-item {
  display: grid;
  grid-template-columns: 2fr 60px 80px 80px;
  align-items: center;
  padding: 14px 16px;
  margin-bottom: 12px;
  border-radius: 12px;
  position: relative;
  overflow: hidden;
  background: #ffffff;
  background-size: cover;
  background-position: center;
  color: white;
  border: 1px solid #e0e0e0;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
  gap: 10px;
}
  .menu-item {
  color: #1c1c1e;
}



 .menu-item::before {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(to top, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0));
  z-index: 0;
  pointer-events: none;
}
 .menu-item span {
  font-size: 1rem;
  white-space: normal;
  word-break: break-word;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.6);
  position: relative;
  z-index: 1;
}

.menu-item select {
    width: 60px;
    padding: 6px 8px;
    font-size: 0.85rem;
    height: 30px;
    border: 1px solid #ccc;
    border-radius: 8px;
    margin-top: 8px;
    background: #fff;
}

 .menu-item button.add-button {
  background: #007aff;
  
}

.menu-item button.add-button:hover {
  background: #005fcc;
}
 .menu-item button {
  
  color: white;
  padding: 4px 8px;
  font-size: 0.8rem;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.2s ease;
  min-width: auto;
  max-width: 70px;
  text-align: center;
}

  .menu-item button:hover {
    background: #005fcc;
  }

  select, input, textarea {
    padding: 10px;
    font-size: 1rem;
    margin: 0 10px 10px 0;
    border-radius: 10px;
    border: 1px solid #ccc;
    background: #fff;
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.05);
  }

  .cart-section {
    margin-top: 30px;
    padding: 20px;
    background: #fff;
    border-radius: 16px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    border: 1px solid #e0e0e0;
  }

  .cart-section h2 {
    font-size: 1.25rem;
    margin-bottom: 10px;
  }

  .total {
    font-weight: bold;
    font-size: 1.2rem;
    margin-top: 20px;
    color: #111;
  }

  button:not(.menu-item button) {
    background: #007aff;
    color: white;
    padding: 12px 24px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    font-size: 1rem;
    font-weight: 500;
    transition: background 0.2s ease;
  }

  button:not(.menu-item button):hover {
    background: #005fcc;
  }

  .checkbox-group,
  .delivery-options {
    background: #ffffff;
    padding: 20px;
    margin-bottom: 30px;
    border-radius: 16px;
    box-shadow: 0 1px 4px rgba(0,0,0,0.05);
    border: 1px solid #e0e0e0;
  }

  .checkbox-group label {
  display: inline-block;
  width: 220px;
  font-size: 1rem;
  margin-bottom: 8px;
  vertical-align: middle;
}

.checkbox-group select {
  display: inline-block;
  width: 80px;
  padding: 6px 10px;
  font-size: 1rem;
  border-radius: 8px;
  border: 1px solid #ccc;
  background: #fff;
  vertical-align: middle;
}

  .delivery-options label,
  .delivery-options select,
  .delivery-options input {
    display: block;
    margin-bottom: 12px;
    font-size: 1rem;
    color: #1c1c1e;
  }

  .hidden {
    display: none;
  }

    .segmented-control {
  position: relative;
  display: flex;
  width: 100%;
  max-width: 100%;
  background: #f0f0f0;
  border-radius: 12px;
  border: 1px solid #ccc;
  overflow: hidden;
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.05);
  margin: 16px 0;
}

.segmented-control input[type="radio"] {
  display: none;
}

.segmented-control label {
  flex: 1;
  text-align: center;
  padding: 12px 0;
  font-size: 1rem;
  font-weight: 500;
  color: #333;
  z-index: 2;
  cursor: pointer;
  user-select: none;
  position: relative;
  transition: color 0.25s ease;
}

.segmented-control .slider {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  width: 50%;
  background-color: #007aff;
  border-radius: 12px;
  transition: transform 0.3s ease;
  z-index: 1;
}

#bezorgen:checked ~ .slider {
  transform: translateX(100%);
}
#afhalen:checked ~ label[for="afhalen"],
#bezorgen:checked ~ label[for="bezorgen"] {
  color: white;
}
  


.delivery-options input[type="text"],
.delivery-options input[type="tel"],
.delivery-options input[type="time"] {
  max-width: 100%;
  width: 100%;
  height: 44px;
  padding: 8px 12px;
  font-size: 1rem;
  box-sizing: border-box;
  border: 1px solid #ccc;
  border-radius: 10px;
  background: #fff;
}


.delivery-options select {
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
  height: 44px;
  font-size: 1rem;
  padding: 8px 12px;
  border: 1px solid #ccc;
  border-radius: 10px;
  margin-bottom: 14px;
}

input[type="time"] {
  text-align: left;
  direction: ltr;
}
@media (max-width: 600px) {
  input[type="time"] {
    width: calc(100% - 2px);
  }
}
.info-text {
  margin-top: 10px;
  padding: 12px 16px;
  background: #ffffff;
  border: 1px solid #e0e0e0;
  border-radius: 12px;
  font-size: 1rem;
  line-height: 1.5;
  color: #1c1c1e;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}

.info-text a {
  color: #007aff;
  text-decoration: underline;
  transition: color 0.2s;
}

.info-text a:hover {
  color: #005fcc;
}
.supply-row {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-top: 14px;
}

.supply-img {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  border-radius: 6px;
}


.supply-content {
  flex: 1;
}

.supply-content label {
  display: block;
  margin-bottom: 4px;
  font-size: 1rem;
  color: #1c1c1e;
}

.supply-content select {
  width: 100%;
  max-width: 100%;
  height: 36px;
  font-size: 1rem;
  padding: 6px 10px;
  border-radius: 10px;
  border: 1px solid #ccc;
  background: #fff;
}


@media (max-width: 600px) {
  .menu-item {
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }

  .menu-item span {
    width: 100%;
    margin-bottom: 8px;
  }

  .menu-item select,
  .menu-item button {
    font-size: 0.85rem;
    padding: 3px 6px;
    width: 15%;
    max-width: 15%;
    margin-top: 4px;
  }}
.add-button {
  background: #007aff;
  color: white;
}

.add-button:hover {
  background: #005fcc;
}

.remove-button {
  background: #ff3b30;
  color: white;
}

.remove-button:hover {
  background: #c1271d;
}


.cart-section.mobile-visible {
  right: 0 !important;
  display: block !important;
}


@media (min-width: 768px) {
  #cart-toggle {
    display: none;
  }
  .cart-section {
    position: fixed;
    right: 20px;
    top: 80px;
    width: 300px;
    max-height: 80vh;
    overflow-y: auto;
    z-index: 1000;
  }
}

@media (max-width: 767px) {
  .cart-section {
    display: none;
  }

  #cart-toggle {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #007aff;
    color: white;
    border: none;
    border-radius: 12px;
    width: 56px;
    height: 56px;
    font-size: 24px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    z-index: 999;
  }

  .cart-section.mobile-visible {
  position: fixed;
  top: 0;
  right: 0;
  width: 90%;
  height: 100%;
  background: #ffffff;
  border-radius: 16px 0 0 16px;
  padding: 20px;
  box-shadow: -4px 0 12px rgba(0, 0, 0, 0.2);
  overflow-y: auto;
  transition: right 0.3s ease-in-out;
  z-index: 1000;
  } 


}

#closeCartBtn {
  position: absolute;
  top: 16px;
  right: 16px;
  width: 36px;
  height: 36px;
  background: #ffffff;
  color: #333;
  font-size: 22px;
  font-weight: bold;
  border: 1px solid #ccc;
  border-radius: 50%;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
  cursor: pointer;
  z-index: 1010;

  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
  padding: 0;
}
#cart-toggle {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 56px;
  height: 56px;
  background: #007aff;
  color: white;
  font-size: 28px;
  font-weight: 600;
  border: none;
  border-radius: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  line-height: 1;
  cursor: pointer;
  z-index: 999;
}


@media (min-width: 768px) {
  #cart-toggle {
    display: none;
  }
}
@media (min-width: 768px) {
  #closeCartBtn {
    display: none;
  }
}
#cart-badge {
  background: red;
  color: white;
  border-radius: 50%;
  padding: 2px 6px;
  font-size: 12px;
  position: absolute;
  top: -5px;
  right: -5px;
  display: inline-block;
}






</style>
</head>
<body>
<nav class="navbar">
    <a href="#menuContainer">Menu</a>
    <a href="#bento-box">Bento Box</a>
    <a href="#sushi-rolls">Sushi Rolls</a>
    <a href="#bubble-tea">Bubble Tea</a>
</nav>
<section id="menuContainer">
    <h2>Menu Container</h2>
    <p>Content for menu container...</p>
</section>
<section id="bento-box">
    <h2>Bento Box</h2>
    <p>Content for bento box...</p>
</section>
<section id="sushi-rolls">
    <h2>Sushi Rolls</h2>
    <p>Content for sushi rolls...</p>
</section>
<section id="bubble-tea">
    <h2>Bubble Tea</h2>
    <p>Content for bubble tea...</p>
</section>

<h1>Nova Asia Online Bestellen</h1>
<div class="delivery-options">
<h2>Kies uw bestelmethode</h2>
<div class="segmented-control">
<input checked="" id="afhalen" name="orderType" onchange="toggleOrderType()" type="radio" value="afhalen"/>
<label for="afhalen">Afhalen</label>
<input id="bezorgen" name="orderType" onchange="toggleOrderType()" type="radio" value="bezorgen"/>
<label for="bezorgen">Bezorgen</label>
<div class="slider"></div>
</div> <!-- ←←← ⚠️这里要闭合 -->
<!-- 这个是在 segmented-control 之外的 -->
<div class="info-text" id="locationInfo" style="white-space: pre-line; font-size: 0.95rem; margin-top: 8px;"></div>
<div id="afhalenFields">
<label>Naam:</label>
<input id="pickupName" type="text"/>
<label>Telefoonnummer:</label>
<input id="pickupPhone" type="tel"/>
<label>Tijd van afhalen:</label>
<input id="pickupTime" type="time"/>
<label>Betaalmethode:</label>
<select id="pickupPayment">
<option value="winkel">In de winkel</option>
<option value="online">Online betaling</option>
</select>
</div>
<div class="hidden" id="bezorgenFields">
<label>Naam:</label>
<input id="deliveryName" type="text"/>
<label>Telefoonnummer:</label>
<input id="deliveryPhone" type="tel"/>
<label>Adres:</label>
<input id="deliveryAddress" type="text"/>
<label>Postcode:</label>
<input id="deliveryPostcode" type="text"/>
<label>Bezorgtijd:</label>
<input id="deliveryTime" type="time"/>
<label>Betaalmethode:</label>
<select id="deliveryPayment">
<option value="contant">Contant</option>
<option value="online">Online betaling</option>
</select>
</div>
</div>
<div class="checkbox-group">
<h2>Draag bij aan duurzaamheid en voorkom verspilling 🌱</h2>
<p style="margin-top: -12px; font-size: 0.95rem; color: #555; text-align: center;">
    Geef aan hoeveel u nodig heeft:
  </p>
<div class="supply-row">
<span class="supply-img">🥢</span>
<div class="supply-content">
<label for="chopstickCount">Aantal stokjes </label>
<select id="chopstickCount"></select>
</div>
</div>
<!-- Sojasaus -->
<div class="supply-row">
<img alt="Sojasaus" class="supply-img" src="images/soja saus.jpg"/>
<div class="supply-content">
<label for="soyCount">Aantal sojasaus flesjes</label>
<select id="soyCount"></select>
</div>
</div>
<!-- Wasabi -->
<div class="supply-row">
<img alt="Wasabi" class="supply-img" src="images/wasabi.jpg"/>
<div class="supply-content">
<label for="wasabiCount">Aantal wasabi</label>
<select id="wasabiCount"></select>
</div>
</div>
<!-- Gember -->
<div class="supply-row">
<img alt="Gember" class="supply-img" src="images/gember.jpg"/>
<div class="supply-content">
<label for="gemberCount">Aantal gember</label>
<select id="gemberCount"></select>
</div>
</div>
</div>

<!-- 添加锚点内容以支持导航功能 -->
<div id="top"></div>
<div id="menuContainer"><h2 style="height: 1px; overflow: hidden;">Menu Section</h2></div>
<div id="bento-box"><h2 style="height: 1px; overflow: hidden;">Bento Box</h2></div>
<div id="sushi-rolls"><h2 style="height: 1px; overflow: hidden;">Sushi Rolls</h2></div>
<div id="bubble-tea"><h2 style="height: 1px; overflow: hidden;">Bubble Tea</h2></div>

<div class="cart-section" id="mobileCart">
  <button id="closeCartBtn" onclick="toggleMobileCart()">×</button>
  <h2 style="padding-top: 60px;">Winkelwagen</h2>
  <ul id="cart"></ul>
  <div class="total">Totaal: €<span id="total">0.00</span></div>
  <button onclick="checkout()">Afrekenen &amp; Betalen</button>
</div>

<button id="cart-toggle" onclick="toggleMobileCart()">🛒<span id="cart-count" style="
      position: absolute;
      top: -6px;
      right: -6px;
      background: red;
      color: white;
      border-radius: 50%;
      padding: 2px 6px;
      font-size: 0.75rem;
      font-weight: bold;
      line-height: 1;">0</span>
</button>

 



<script>
const menuData = {
  "Bento Box": [
    { name: "Chicken Bento", price: 12, image: "images/chicken-bento.jpg" }
  ],
  "Sushi Rolls": [
    { name: "Sake Maki", price: 8.5, image: "images/sake-maki.jpg" },
    { name: "California Roll", price: 10 }
  ],
  "Bubble Tea": [
    { name: "Bubble Tea", price: 5 }
  ]
};






const cart = [];
const menuContainer = document.getElementById("menuContainer");

Object.entries(menuData).forEach(([category, items]) => {
  const categoryTitle = document.createElement("h2");
  categoryTitle.textContent = category;
  menuContainer.appendChild(categoryTitle);

  items.forEach((item) => {
    const div = document.createElement('div');
    div.className = 'menu-item';

    if (item.image) {
      div.style.backgroundImage = `url('${item.image}')`;
      div.style.backgroundSize = 'cover';
      div.style.backgroundPosition = 'center';
      div.style.position = 'relative';
      div.style.color = '#111';
    }

    const nameSpan = document.createElement('span');
    nameSpan.textContent = `${item.name} - €${item.price.toFixed(2)}`;

const select = document.createElement('select');
for (let i = 0; i <= 20; i++) {
  const option = document.createElement('option');
  option.value = i;
  option.textContent = i;
  select.appendChild(option);
}

const sections = document.querySelectorAll('.menu-section');
const indicator = document.getElementById('section-indicator');





select.addEventListener('change', () => {
  const qty = parseInt(select.value);
  const existing = cart.find(cartItem => cartItem.name === item.name);

  if (qty === 0) {
    if (existing) {
      const index = cart.find(cartItem => cartItem.name === item.name);
      if (index !== -1) cart.splice(index, 1);
    }
  } else {
    if (existing) {
      existing.qty = qty;
    } else {
      cart.push({ name: item.name, price: item.price, qty });
    }
  }

  updateCart();
});


    const addButton = document.createElement('button');
    addButton.textContent = '+';
    addButton.className = 'add-button';
    addButton.onclick = () => {
      let currentQty = parseInt(select.value);
      if (currentQty < 20) {
        currentQty++;
        select.value = currentQty;

        const existing = cart.find(cartItem => cartItem.name === item.name);
        if (existing) {
          existing.qty = currentQty;
        } else {
          cart.push({ name: item.name, price: item.price, qty: currentQty });
        }
        updateCart();
      }
    };

const removeButton = document.createElement('button');
removeButton.textContent = '-';
removeButton.className = 'remove-button';
removeButton.onclick = () => {
  let currentQty = parseInt(select.value);
  if (currentQty > 0) {
    currentQty--;
    select.value = currentQty;

    const existing = cart.find(cartItem => cartItem.name === item.name);
    if (existing) {
      if (currentQty === 0) {
        const index = cart.find(cartItem => cartItem.name === item.name);
        if (index !== -1) cart.splice(index, 1);
      } else {
        existing.qty = currentQty;
      }
      updateCart();
    }
  }
};


    div.appendChild(nameSpan);
    div.appendChild(select);
    div.appendChild(addButton);
    div.appendChild(removeButton);

    menuContainer.appendChild(div);
  });
});

function populateSelect(id, max) {
  const sel = document.getElementById(id);
  for (let i = 0; i <= max; i++) {
    const opt = document.createElement('option');
    opt.value = i;
    opt.textContent = i;
    sel.appendChild(opt);
  }
}

populateSelect('chopstickCount', 20);
populateSelect('soyCount', 20);
populateSelect('wasabiCount', 20);
populateSelect('gemberCount', 20);

function updateCart() {
  const cartList = document.getElementById('cart');
  cartList.innerHTML = '';
  let total = 0;

  cart.forEach((item, index) => {
    const li = document.createElement('li');

    const select = document.createElement('select');
    for (let i = 0; i <= 20; i++) {
      const option = document.createElement('option');
      option.value = i;
      option.textContent = i;
      if (i === item.qty) option.selected = true;
      select.appendChild(option);
    }

    select.addEventListener('change', () => {
      const newQty = parseInt(select.value);

      if (newQty === 0) {
        cart.splice(index, 1);
      } else {
        item.qty = newQty;
      }

      const allMenuItems = document.querySelectorAll('.menu-item');
      allMenuItems.forEach(menuDiv => {
        const nameText = menuDiv.querySelector('span')?.textContent || '';
        if (nameText.startsWith(item.name)) {
          const menuSelect = menuDiv.querySelector('select');
          if (menuSelect) {
            menuSelect.value = newQty;
          }
        }
      });

      updateCart();
    });

    const itemTotal = item.qty * item.price;
    li.textContent = `${item.name} = €${itemTotal.toFixed(2)} `;
    li.appendChild(select);
    cartList.appendChild(li);

    total += itemTotal;
  });

  if (cart.length > 0) {
    const extrasTitle = document.createElement('li');
    extrasTitle.textContent = '\u2014 Extra\u2019s \u2014';
    extrasTitle.style.marginTop = '10px';
    extrasTitle.style.fontWeight = 'bold';
    cartList.appendChild(extrasTitle);
  }

  const extras = [
    { label: "Stokjes", id: "chopstickCount" },
    { label: "Sojasaus", id: "soyCount" },
    { label: "Wasabi", id: "wasabiCount" },
    { label: "Gember", id: "gemberCount" }
  ];

  extras.forEach(extra => {
    const li = document.createElement('li');
    li.textContent = `${extra.label}: `;

    const select = document.createElement('select');
    for (let i = 0; i <= 20; i++) {
      const option = document.createElement('option');
      option.value = i;
      option.textContent = i;
      if (i === parseInt(document.getElementById(extra.id).value)) {
        option.selected = true;
      }
      select.appendChild(option);
    }

    select.addEventListener('change', () => {
      document.getElementById(extra.id).value = select.value;
      updateCart();
    });

    li.appendChild(select);
    cartList.appendChild(li);
  });

  document.getElementById('total').textContent = total.toFixed(2);

  const totalQty = cart.reduce((sum, item) => sum + item.qty, 0);
  const badge = document.getElementById('cart-count');
  badge.textContent = totalQty;
  badge.style.display = totalQty > 0 ? 'inline-block' : 'none';
}

select.addEventListener('change', () => {
  const qty = parseInt(select.value);

  const existing = cart.find(cartItem => cartItem.name === item.name);

  if (qty === 0) {
    if (existing) {
      const index = cart.find(cartItem => cartItem.name === item.name);
      if (index !== -1) cart.splice(index, 1);
    }
  } else {
    if (existing) {
      existing.qty = qty;
    } else {
      cart.push({ name: item.name, price: item.price, qty });
    }
  }

  updateCart();
});




function checkout() {
  const paidItems = cart.filter(item => item.price > 0 && item.qty > 0);
  if (paidItems.length === 0) {
    alert('U moet ten minste één gerecht selecteren om te bestellen.');
    return;
  }

  const chopstickCount = document.getElementById('chopstickCount').value;
  const soyCount = document.getElementById('soyCount').value;
  const wasabiCount = document.getElementById('wasabiCount').value;
  const gemberCount = document.getElementById('gemberCount').value;

  let orderSummary = cart.map(item => `${item.name} x ${item.qty}`).join('\n');
  orderSummary += `\nStokjes nodig: ${chopstickCount}`;
  orderSummary += `\nSojasaus: ${soyCount}`;
  orderSummary += `\nWasabi: ${wasabiCount}`;
  orderSummary += `\nGember: ${gemberCount}`;

  const orderType = document.querySelector('input[name="orderType"]:checked').value;
  let customerDetails = '';
  let paymentMethod = '';

  if (orderType === 'afhalen') {
    const name = document.getElementById('pickupName').value.trim();
    const phone = document.getElementById('pickupPhone').value.trim();
    const time = document.getElementById('pickupTime').value;
    paymentMethod = document.getElementById('pickupPayment').value;

    if (!name || !phone || !time) {
      alert("Vul alstublieft alle afhaalvelden in: naam, telefoon en tijd.");
      return;
    }

    customerDetails = `\n[Afhalen]\nNaam: ${name}\nTelefoon: ${phone}\nAfhaaltijd: ${time}\nBetaalwijze: ${paymentMethod}`;
  } else {
    const name = document.getElementById('deliveryName').value.trim();
    const phone = document.getElementById('deliveryPhone').value.trim();
    const address = document.getElementById('deliveryAddress').value.trim();
    const postcodeRaw = document.getElementById('deliveryPostcode').value.trim();
    const time = document.getElementById('deliveryTime').value;
    paymentMethod = document.getElementById('deliveryPayment').value;

    const postcodeClean = postcodeRaw.replace(/\s+/g, '');
    const postcode = postcodeClean.slice(0, 4);
    const allowedPostcodes = ['2341', '2342', '2343', '2333', '2334', '2231', '2232', '2361', '2235'];

    if (!name || !phone || !address || !postcodeRaw || !time) {
      alert("Vul alstublieft alle bezorgvelden in: naam, telefoon, adres, postcode en tijd.");
      return;
    }

    if (!allowedPostcodes.includes(postcode)) {
      alert(`🚫 Wij bezorgen helaas niet in dit postcodegebied (${postcode}).`);
      const postcodeField = document.getElementById('deliveryPostcode');
      postcodeField.style.borderColor = 'red';
      postcodeField.focus();
      return;
    } else {
      document.getElementById('deliveryPostcode').style.borderColor = '';
    }

    customerDetails = `\n[Bezorgen]\nNaam: ${name}\nTelefoon: ${phone}\nAdres: ${address}\nPostcode: ${postcodeRaw}\nBezorgtijd: ${time}\nBetaalwijze: ${paymentMethod}`;
  }

  const totalPrice = document.getElementById('total').textContent;
  const message = `📦 Nieuwe bestelling bij *Nova Asia*:\n\n${orderSummary}\n${customerDetails}\nTotaal: €${totalPrice}`;

  fetch('https://flask-order-api.onrender.com/api/send', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ message })
  })
  .then(res => res.json())
  .then(data => {
    if (data.status === 'ok') {
      alert("Bestelling verzonden!\n\n" + orderSummary + "\nTotaal: €" + totalPrice);

      if (paymentMethod === 'online') {
        setTimeout(() => {
          window.location.href = 'https://tikkie.me/pay/novaasia';
        }, 300);
      }
    } else {
      alert("Fout bij verzenden bestelling: " + (data.error || "onbekend"));
    }
  })
  .catch(err => {
    alert("Netwerkfout bij verzenden bestelling");
    console.error(err);
  });
}


</script>
<script>
  function toggleOrderType() {
    const afhalen = document.getElementById('afhalen');
    const infoBox = document.getElementById('locationInfo');
    const afhalenFields = document.getElementById('afhalenFields');
    const bezorgenFields = document.getElementById('bezorgenFields');

    if (afhalen.checked) {
      infoBox.innerHTML = `Adres voor afhalen: 
  <a href="https://www.google.com/maps?q=Ommevoort+4,+2341+VT+Oegstgeest" target="_blank" style="color: #007aff; text-decoration: underline;">
    Ommevoort 4, 2341 VT Oegstgeest
  </a><br>
  📞: <a href="tel:0622599566" style="color: #007aff; text-decoration: underline;">0622599566</a>`;
      
      afhalenFields.classList.remove('hidden');
      bezorgenFields.classList.add('hidden');
    } else {
      infoBox.textContent = 'Wij bezorgen in de volgende postcodegebieden:\n2341, 2342, 2343, 2333, 2334, 2231, 2232, 2361, 2235';
      
      bezorgenFields.classList.remove('hidden');
      afhalenFields.classList.add('hidden');
    }
  }

  // 初始化执行一次
  toggleOrderType();
</script>





<script>
  const allowedPostcodes = ['2341', '2342', '2343', '2333', '2334', '2231', '2232', '2361', '2235'];
  const postcodeInput = document.getElementById('deliveryPostcode');

  postcodeInput.addEventListener('blur', function () {
    const raw = this.value.trim();
    const formatRegex = /^[0-9]{4}[A-Z]{2}$/;
    let hint = document.getElementById('postcodeHint');

    if (!hint) {
      hint = document.createElement('div');
      hint.id = 'postcodeHint';
      hint.style.color = 'red';
      hint.style.marginTop = '4px';
      this.parentNode.appendChild(hint);
    }

    // 格式检查
    if (!formatRegex.test(raw)) {
      this.style.borderColor = 'red';
      hint.textContent = 'Postcode moet het formaat 1234AB hebben (zonder spatie).';
      return;
    }

    // 区域检查
    const postcode = raw.slice(0, 4); // 取前4位数字
    if (!allowedPostcodes.includes(postcode)) {
      this.style.borderColor = 'red';
      hint.textContent = `🚫 Wij bezorgen niet in dit postcodegebied (${postcode}).`;
    } else {
      this.style.borderColor = '';
      hint.textContent = '';
    }
  });
</script>



<script>
function showMobileCartButtonIfNeeded() {
  const toggleBtn = document.getElementById('cart-toggle');
  if (window.innerWidth < 768) {
    toggleBtn.style.display = 'block';
  } else {
    toggleBtn.style.display = 'none';
  }
}

showMobileCartButtonIfNeeded();

window.addEventListener('resize', showMobileCartButtonIfNeeded);
</script>


<script>
  ['chopstickCount', 'soyCount', 'wasabiCount', 'gemberCount'].forEach(id => {
    document.getElementById(id).addEventListener('change', updateCart);
  });
</script>

<script>
function toggleMobileCart() {
  const cartSection = document.getElementById('mobileCart');
  cartSection.classList.toggle('mobile-visible');
}
</script>


<script>
  document.addEventListener('DOMContentLoaded', () => {
    const navLinks = document.querySelectorAll('.navbar a');

    // 获取所有锚点对应的 section 元素
    const sections = Array.from(navLinks)
      .map(link => document.querySelector(link.getAttribute('href')))
      .filter(section => section);

    window.addEventListener('scroll', () => {
      let currentSection = null;

      sections.forEach(section => {
        const top = section.getBoundingClientRect().top;
        if (top <= 100) {
          currentSection = section;
        }
      });

      if (currentSection) {
        navLinks.forEach(link => {
          link.classList.remove('active');
          if (link.getAttribute('href') === `#${currentSection.id}`) {
            link.classList.add('active');
          }
        });
      }
    });
  });
</script>





</body>
</html>